!function(){if(window.__FeedbackLoaded)return;window.__FeedbackLoaded=!0;const n=document.currentScript,e=window.FeedbackConfig||{},t=n?.dataset,o={projectId:e?.projectId??t?.projectId??"unknown",theme:e?.theme??t?.theme??"light",title:e?.title??t?.title??"Seberapa besar kemungkinan Anda merekomendasikan situs ini ke teman?",thankyou:e?.thankyou??t?.thankyou??"üôè Terima kasih atas feedback Anda!",textButton:e?.textButton??t?.textButton??"üìù Rate your experience",textSubmit:e?.textSubmit??t?.textSubmit??"Kirim",descriptionScore:e?.descriptionScore??t?.descriptionScore,illustration:e?.illustration??t?.illustration??"https://www.pngall.com/wp-content/uploads/12/Illustration-PNG-Free-Image.png",api:e?.api??t?.api??"https://nps-be.telkom-digital.id/v1/responses",apiMethod:e?.apiMethod??t?.apiMethod??"POST",customerId:e?.customerId??t?.customerId,surveyId:e?.surveyId??t?.surveyId,variant:e?.variant??t?.variant??"modal"},i="feedbackSent",r=document.createElement("style");r.innerHTML=`\n    #feedback-tab {\n      position: fixed;\n      top: 50%;\n      right: 0;\n      transform: translateY(-50%);\n      background-color: ${"dark"===o.theme?"#333":"#e53935"};\n      color: white;\n      writing-mode: vertical-rl;\n      text-orientation: mixed;\n      padding: 12px 8px;\n      border-top-left-radius: 12px;\n      border-bottom-left-radius: 12px;\n      cursor: pointer;\n      font-family: sans-serif;\n      z-index: 9999;\n    }\n\n    #feedback-tab .tab-content {\n      writing-mode: vertical-rl;\n      text-orientation: mixed;\n      display: inline-block;\n      font-weight: semiibold;;\n      position: relative;\n    }\n\n    #feedback-tab .chevron {\n      display: inline-block;\n      transform: rotate(90deg);\n      font-size: 16px;\n      margin-top: 4px;\n      transition: transform 0.3s ease;\n    }\n\n    #feedback-tab .chevron-icon {\n      display: inline-block;\n      transform: rotate(90deg);\n      transition: transform 0.3s ease;\n      margin-top: 4px;\n      font-size: 16px;\n    }\n\n    #feedback-popup.open ~ #feedback-tab .chevron {\n      transform: rotate(180deg); /* mengarah ke bawah */\n    }\n\n    #feedback-popup {\n      position: fixed;\n      top: 50%;\n      transform: translateY(-50%);\n      right: -385px;\n      width: 300px;\n      height: auto;\n      min-height: 200px;\n      max-height: 90%;\n      background: ${"dark"===o.theme?"#222":"white"};\n      color: ${"dark"===o.theme?"white":"black"};\n      border-left: ${"dark"===o.theme?"1px solid #444":"1px solid #ccc"};\n      box-shadow: -4px 0 16px rgba(0, 0, 0, 0.2);\n      transition: right 0.3s ease-in-out;\n      z-index: 9998;\n      font-family: sans-serif;\n      padding:20px;\n      border-top-left-radius: 16px;\n      border-bottom-left-radius: 16px;\n      padding-right: 60px;\n      display: grid;\n      place-content: center;\n    }\n\n    #feedback-popup.open {\n      right: 0;\n    }\n\n    #feedback-popup h4 {\n      margin-top: 0;\n      font-size: 16px;\n    }\n\n    .score-button {\n      padding: 6px 12px;\n      margin: 4px 2px;\n      border: 1px solid #ccc;\n      border-radius: 6px;\n      cursor: pointer;\n      background: #f9f9f9;\n    }\n\n    .score-button.selected {\n      background: ${"dark"===o.theme?"#555":"#e53935"};\n      color: white;\n    }\n\n    #score-description {\n      font-size: 13px;\n      color: ${"dark"===o.theme?"white":"#666"};\n      margin-top: 4px;\n      margin-bottom: 10px;\n    }\n\n    #submit-feedback {\n      margin-top: 20px;\n      width: 100%;\n      background: ${"dark"===o.theme?"#444":"#e53935"};\n      color: white;\n      padding: 8px;\n      border: none;\n      border-radius: 12px;\n      cursor: pointer;\n      font-size: 14px;\n    }\n    #submit-feedback:disabled {\n      background: #ccc;\n      cursor: not-allowed;\n    }\n\n    #close-popup {\n      position: absolute;\n      top: 16px;\n      left: 16px;\n      background: none;\n      border: none;\n      font-size: 24px;\n      font-weight: light;\n      cursor: pointer;\n      color: ${"dark"===o.theme?"white":"black"};\n    }\n\n    .feedback-title {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 10px;\n    }\n\n    /* -------------------MODAL------------------- */\n    #feedback-overlay {\n      position: fixed;\n      top: 0; left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0,0,0,0.5);\n      backdrop-filter: blur(2px);\n      z-index: 9998;\n      display: none;\n    }\n    #feedback-modal {\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: ${"dark"===o.theme?"#222":"white"};\n      color: ${"dark"===o.theme?"white":"black"};\n      border-radius: 12px;\n      box-shadow: 0 8px 30px rgba(0,0,0,0.2);\n      z-index: 9999;\n      width: 350px;\n      max-width: 90%;\n      padding: 0;\n      overflow-y: scroll;\n      display: none;\n      padding: 20px;\n      max-height: 90vh;\n    }\n    #feedback-modal.open, #feedback-overlay.open {\n        display: block;\n    }\n\n    .modal-illustration {\n      flex: 1;\n      background: #fef3f2;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      padding: 20px;\n      border-radius: 12px;\n    }\n\n    .modal-illustration img {\n      max-width: 100%;\n      height: auto;\n      border-radius: 12px;\n    }\n\n    .modal-form {\n      flex: 1;\n      padding: 24px;\n      position: relative;\n    }\n\n    .modal-form h4 {\n      font-size: 18px;\n      margin-top: 0;\n    }\n\n    .modal-scores {\n      display: grid;\n      grid-template-columns: repeat(6, 1fr);\n      gap: 8px;\n      margin: 12px 0;\n    }\n  `,document.head.appendChild(r);const a=document.createElement("div");a.id="feedback-tab",a.innerHTML=`\n    <span class="tab-content">\n      ${o.textButton}\n      <svg class="chevron-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"\n         xmlns="http://www.w3.org/2000/svg">\n      <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n    </svg>\n    </span>\n  `,document.body.appendChild(a);const d=document.createElement("div");d.id="feedback-overlay",document.body.appendChild(d);const s="modal"===o.variant,c=document.createElement("div");c.id=s?"feedback-modal":"feedback-popup",document.body.appendChild(c);const l="1"===localStorage.getItem(i);c.innerHTML=l?`\n      <h4 style="margin-top: 40px; text-align: center;">\n        ${o.thankyou}\n      </h4>\n    `:s?`\n      <div class="modal-wrapper">\n        <div class="modal-illustration">\n          <img src=${o.illustration} alt="Feedback" />\n        </div>\n        <div class="modal-content">\n          <button id="close-popup">&times;</button>\n          <h4 class="feedback-title">${o.title}</h4>\n          <div id="scores" class="modal-scores"></div>\n          <p id="score-description">${o.descriptionScore}</p>\n          <button id="submit-feedback" disabled>Submit</button>\n        </div>\n      </div>\n    `:`\n        <h4>${o.title}</h4>\n        <div id="scores"></div>\n        ${o.descriptionScore&&`<p id="score-description">\n          ${o.descriptionScore}\n          </p>`}\n          <button id="submit-feedback" disabled>${o.textSubmit}</button>\n      `;const p=c.querySelector("#submit-feedback");let m=null;if(!l){const n=c.querySelector("#scores");for(let e=0;e<=10;e++){const t=document.createElement("button");t.innerText=e,t.className="score-button",t.onclick=()=>{m=e,n.querySelectorAll("button").forEach(n=>n.classList.remove("selected")),t.classList.add("selected"),p.disabled=!1},n.appendChild(t)}}const u=a.querySelector(".chevron-icon");a.addEventListener("click",()=>{const n=c.classList.toggle("open");d.classList.toggle("open"),u.style.transform=n?"rotate(270deg)":"rotate(90deg)"}),c.querySelector("#close-popup")?.addEventListener("click",()=>{c.classList.remove("open"),u.style.transform="rotate(90deg)"}),d.addEventListener("click",()=>{c.classList.remove("open"),d.classList.toggle("open"),u.style.transform="rotate(90deg)"}),c.querySelector("#close-popup")?.addEventListener("click",()=>{c.classList.remove("open"),d.classList.toggle("open"),u.style.transform="rotate(90deg)"}),c.querySelector("#submit-feedback").addEventListener("click",()=>{m?(p.innerHTML="Submitting...",fetch(o.api,{method:o.apiMethod,headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:o.surveyId,survey_id:o.custommerId,score:m,comment:"Great product, but could use more features.",response_date:(new Date).toISOString()})}).then(n=>n.json()).then(n=>{200===Number(n.statusCode)&&(localStorage.setItem(i,"1"),c.innerHTML=`\n          <h4 style="margin-top: 40px; text-align: center;">\n            ${o.thankyou}\n          </h4>\n        `,setTimeout(()=>{c.classList.remove("open"),d.classList.remove("open")},2e3))}).catch(()=>{console.warn("Gagal mengirim feedback")}).finally(()=>{p.innerHTML=o.textSubmit})):alert("Pilih skor terlebih dahulu")})}();